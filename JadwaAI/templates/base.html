{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="{{ request.LANGUAGE_CODE }}"
      dir="{% if request.LANGUAGE_CODE == 'ar' %}rtl{% else %}ltr{% endif %}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jadwa AI</title>

  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  {% block extra_css %}{% endblock %}
</head>

<body>

  {% include "partials/navbar.html" %}

  <main class="app-bg">
    {% block content %}{% endblock %}
  </main>

  {% include "partials/footer.html" %}

  {% block extra_js %}{% endblock %}

  <!-- Dropdown Script -->
  <script>
    document.addEventListener("click", function (e) {
      const dropdown = document.querySelector("[data-dropdown]");
      if (!dropdown) return;

      const toggle = dropdown.querySelector("[data-toggle]");
      const inside = dropdown.contains(e.target);

      if (toggle && toggle.contains(e.target)) {
        dropdown.classList.toggle("is-open");
        toggle.setAttribute("aria-expanded", dropdown.classList.contains("is-open"));
        return;
      }

      if (!inside) {
        dropdown.classList.remove("is-open");
        toggle.setAttribute("aria-expanded", "false");
      }
    });

    document.addEventListener("keydown", function (e) {
      if (e.key === "Escape") {
        const dropdown = document.querySelector("[data-dropdown]");
        if (!dropdown) return;
        dropdown.classList.remove("is-open");
      }
    });
  </script>

</body>
</html>
