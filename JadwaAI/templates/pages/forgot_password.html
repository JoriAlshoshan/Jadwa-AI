{% extends "base.html" %}
{% load static i18n %}
{% block content %}

<style>
/* ===== Soft Pink Validation ===== */
.contact-form input{
  width:100%;
  padding:12px;
  border:1px solid #cbd5e1;
  border-radius:20px;
  transition:all .2s ease;
}

.error-msg{
  margin-top:8px;
  font-size:14px;
  font-weight:500;
  color:#c0392b;
}

.input-error{
  border:1px solid #e7a6a6 !important;
  box-shadow:0 0 0 6px rgba(231,166,166,.12);
}

/* ===== RTL Fix ===== */
.rtl { direction: rtl; }
.rtl .form-label { text-align: right; }
</style>

<div class="page {% if LANGUAGE_CODE == 'ar' %}rtl{% endif %}">
  <section class="legal-page">
    <div class="legal-container" style="max-width:420px; margin:0 auto;">

      <div style="text-align:center; margin-bottom:34px;">
        <h2 style="margin-bottom:12px; color:#0b0f1a;">
          {% trans "Forgot your password?" %}
        </h2>

        <p style="margin-bottom:30px; color:#64748b;">
          {% trans "Enter your email and well send you a verification code." %}
        </p>
      </div>

      {# ✅ حذفنا messages بالكامل عشان ما تطلع رسائل username/password فوق #}

      <form method="post" class="contact-form" novalidate>
        {% csrf_token %}

        <div class="form-row">
          <label class="form-label">
            {% trans "Email address" %}
          </label>

          <input
            type="email"
            name="email"
            value="{{ request.POST.email|default_if_none:'' }}"
            class="form-input {% if form.email.errors %}input-error{% endif %}"
            placeholder="{% trans 'Enter your email' %}"
            required
          >

          {% if form.email.errors %}
            <div class="error-msg">
              {{ form.email.errors.0 }}
            </div>
          {% endif %}
        </div>

        <button type="submit" class="btn btn-full" style="margin-top:12px;">
          {% trans "Send OTP" %}
        </button>
      </form>

      <p style="margin-top:18px; text-align:center; color:#64748b;">
        {% trans "Remember your password?" %}
        <a href="{% url 'login' %}" class="contact-link">
          {% trans "Login" %}
        </a>
      </p>

    </div>
  </section>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const input = document.querySelector('input[name="email"]');

  if (input) {
    input.addEventListener("input", function() {
      if (this.value.trim() !== "") {
        this.classList.remove("input-error");
        const errorMsg = document.querySelector('.error-msg');
        if (errorMsg) errorMsg.style.display = "none";
      }
    });
  }
});
</script>

{% endblock %}
